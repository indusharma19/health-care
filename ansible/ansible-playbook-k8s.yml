- name: Deploy Health-Care Application on Kubernetes
  hosts: all
  become: yes
  tasks:
    - name: Ensure kubectl is installed
      apt:
        name: kubectl
        state: present
        update_cache: yes

    - name: Clone GitHub repository
      ansible.builtin.git:
        repo: https://github.com/indusharma19/health-care.git
        dest: /tmp/health-care  # Destination directory on the target machine

    - name: Deploy Health-Care Deployment
      command: kubectl apply -f /tmp/health-care/ansible/deployment.yaml
      args:
        chdir: /tmp/health-care/ansible

    - name: Expose Health-Care Service
      command: kubectl apply -f /tmp/health-care/ansible/service.yaml
      args:
        chdir: /tmp/health-care/ansible

